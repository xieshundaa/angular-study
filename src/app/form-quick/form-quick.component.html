<div class="container">
  <div class="panel panel-primary">
    <div class="panel-heading">用户注册(模板驱动表单)</div>
    <div class="panel-body">
      <form #registerForm="ngForm" class="form-horizontal" (ngSubmit)="_submitform(registerForm, $event)" novalidate>
        <div class="form-group" [ngClass]="{'has-error': userName.invalid && (userName.dirty || userName.touched) }">
          <label class="col-xs-2 control-label">用户名：</label>
          <div class="col-xs-10">
            <input #userName="ngModel" [(ngModel)]="regModel.userName" name="userName" type="email" class="form-control" placeholder="Email" required minlength="12" maxlength="32" pattern="^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$">
            <div *ngIf="userName.invalid && (userName.dirty || userName.touched)" class="text-danger">
              <div *ngIf="userName.errors.required">
                用户名不能为空
              </div>
              <div *ngIf="userName.errors.minlength">
                最小长度不能小于12个字符
              </div>
              <div *ngIf="userName.errors.maxlength">
                最大长度不能大于32个字符
              </div>
              <div *ngIf="userName.errors.pattern">
                请输入合法的邮箱
              </div>
            </div>
          </div>
        </div>
        <div class="form-group"  [class.has-error]="mobile.invalid && (mobile.dirty || mobile.touched)">
          <label class="col-xs-2 control-label">手机号：</label>
          <div class="col-xs-10">
            <!-- <input #mobile="ngModel" [(ngModel)]="regModel.mobile" name="mobile" ChineseMobileValidator class="form-control" placeholder="Mobile">
            <div *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)" class="text-danger">
                <div *ngIf="!mobile.errors.ChineseMobileValidator">
                  请输入合法的手机号
                </div>
            </div> -->
            <input #mobile="ngModel" [(ngModel)]="regModel.mobile" name="mobile" class="form-control" placeholder="账号" required pattern="^1(3|4|5|7|8)\d{9}$">
            <div *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)" class="text-danger">
                <div *ngIf="mobile.errors.required">请输入手机号</div>
                <div *ngIf="  mobile.errors.pattern">
                  请输入合法的手机号
                </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-xs-2 control-label">密码:</label>
          <div class="col-xs-10">
            <input #password="ngModel" [(ngModel)]="regModel.password" name="password" type="password" class="form-control" placeholder="密码" required minlength="6" validateEqual="confirmPassword" reverse="true">
            <!-- <input #pwd name="password" type="password" class="form-control" placeholder="Password" (keyup)="0"> -->
            <div *ngIf="password.invalid && (password.dirty || password.touched)" class="text-danger">
                <div *ngIf="password.errors.required">请输入密码</div>
                <div *ngIf="password.errors.minlength">
                  密码长度最少为6位
                </div>

            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-xs-2 control-label">确认密码:</label>
          <div class="col-xs-10">
            <input #confirmPassword="ngModel" [(ngModel)]="regModel.confirmPassword" name="confirmPassword" type="password" class="form-control" placeholder="确认密码" required minlength="6" confirmPassword="password" reverse="false">
            <!-- <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="text-danger">
              <div *ngIf="confirmPassword.errors.required">请输入密码</div>
              <div *ngIf="confirmPassword.errors.validateEqual">两次密码输入不一致</div>
              <div *ngIf="confirmPassword.errors.minlength">
                再次输入的密码长度最少为6位
              </div>
            </div> -->
            <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="text-danger">
              <div *ngIf="confirmPassword.errors.required" >
                确认密码是必填项
              </div>
              <div *ngIf="confirmPassword.errors.minlength">
                确认密码需至少6位
              </div>
              <div *ngIf="confirmPassword.errors.validateEqual">
                确认密码不匹配
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <div class="checkbox">
                <label>
                  <input type="checkbox" #rememeberMe="ngModel" [(ngModel)]="regModel.rememeberMe" name="rememeberMe">记住我
                </label>
              </div>
            </div>
          </div>
        <button class="btn btn-success" type="submit" [disabled]="!registerForm.valid">提交</button>
        <button class="btn btn-success" type="button" (click)="registerForm.reset()">重置</button>
      </form>
    </div>
    <div class="panel-footer">
      <p>{{registerForm.value | json}}</p>
      <p>用户名：{{userName.value}}
                {{userName.valid}}
                {{userName.invalid}}
                {{userName.pending}}
                {{userName.pristine}}
                {{userName.dirty}}
                {{userName.untouched}}
                {{userName.touched}}
      </p>
      <p>密码：{{password.value}}</p>
      <p>手机号：{{mobile.value}}</p>
      <p>表单状态： {{registerForm.valid}}
                   {{registerForm.invalid}}
                   {{registerForm.pending}}
                   {{registerForm.pristine}}
                   {{registerForm.dirty}}
                   {{registerForm.untouched}}
                   {{registerForm.touched}}
      </p>
    </div>
  </div>
</div>
